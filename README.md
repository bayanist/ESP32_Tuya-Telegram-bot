# ü§ñ Telegram Bot –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ Tuya

–ü—Ä–æ–µ–∫—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ Tuya —á–µ—Ä–µ–∑ Telegram –±–æ—Ç –Ω–∞ –±–∞–∑–µ ESP32.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É–º–Ω—ã–º–∏ —Ä–æ–∑–µ—Ç–∫–∞–º–∏ –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è–º–∏ Tuya
- ‚è∞ –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∞–π–º–µ—Ä–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–∫–ª—é—á–µ–Ω–∏–µ–º
- üîä –ó–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –¥–∏–Ω–∞–º–∏–∫
- üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üîê –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –ø–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Telegram

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- ESP32
- –ü—å–µ–∑–æ–¥–∏–Ω–∞–º–∏–∫ (–ø–æ–¥–∫–ª—é—á–µ–Ω –∫ GPIO 23)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Wi-Fi

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
- Arduino IDE
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:
  - WiFi
  - WiFiClientSecure
  - UniversalTelegramBot
  - ArduinoJson
  - mbedtls

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone https://github.com/yourusername/tuya-telegram-bot.git
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —á–µ—Ä–µ–∑ Library Manager –≤ Arduino IDE:
   - UniversalTelegramBot
   - ArduinoJson (–≤–µ—Ä—Å–∏—è 6.x)

3. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.ino` –≤ Arduino IDE

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Wi-Fi
–ó–∞–º–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–π —Å–µ—Ç–∏:
```cpp
const char* ssid = "–í–ê–®_WIFI_SSID";
const char* password = "–í–ê–®_WIFI_–ü–ê–†–û–õ–¨";
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞
–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —É [@BotFather](https://t.me/botfather) –∏ —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ:
```cpp
#define BOT_TOKEN "–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê"
```

–ü–æ–ª—É—á–∏—Ç–µ –≤–∞—à Telegram ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ [@userinfobot](https://t.me/userinfobot)) –∏ —É–∫–∞–∂–∏—Ç–µ:
```cpp
const String ALLOWED_ID_1 = "–í–ê–®_TELEGRAM_ID";
const String ALLOWED_ID_2 = "–í–¢–û–†–û–ô_TELEGRAM_ID"; // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Tuya Cloud
–ü–æ–ª—É—á–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ [Tuya IoT Platform](https://iot.tuya.com/):
```cpp
const String TUYA_CLIENT_ID  = "–í–ê–®_CLIENT_ID";
const String TUYA_SECRET     = "–í–ê–®_SECRET_KEY";
const char* TUYA_HOST        = "openapi.tuyaeu.com"; // –†–µ–≥–∏–æ–Ω: EU, US, CN
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
–ù–∞–π–¥–∏—Ç–µ ID –≤–∞—à–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Tuya –∏ –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö:
```cpp
Device devices[] = {
  {"- üîÜ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–º –Ω–∞ —É–ª–∏—Ü–µ", "DEVICE_ID_1"},
  {"- üîå —Ä–æ–∑–µ—Ç–∫–∞ –Ω–∞ –∫—É—Ö–Ω–µ", "DEVICE_ID_2"}
};
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/start` - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- `/device1`, `/device2` –∏ —Ç.–¥. - –≤—ã–±—Ä–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º
- `/on1`, `/on2` - –≤–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
- `/off1`, `/off2` - –≤—ã–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

### –¢–∞–π–º–µ—Ä—ã
- `/time5` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –Ω–∞ 5 –º–∏–Ω—É—Ç
- `/time10` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –Ω–∞ 10 –º–∏–Ω—É—Ç
- `/time15` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –Ω–∞ 15 –º–∏–Ω—É—Ç
- `/timeset 30` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω—É—Ç
- `/time` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è
- `/timereset` - –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–∞–π–º–µ—Ä –∏ –≤—ã–∫–ª—é—á–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- –ó–≤—É–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã: –≤—ã—Å–æ–∫–∏–π —Ç–æ–Ω –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏, –Ω–∏–∑–∫–∏–π –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–∏–∏
- –¢–∞–π–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∫–ª—é—á–∞–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–∞–π–º–µ—Ä
- –°—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ


## –ê–≤—Ç–æ—Ä

Anton Titov  
Telegram: [@bayanman](https://t.me/bayanman)

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ LICENSE.

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [UniversalTelegramBot](https://github.com/witnessmenow/Universal-Arduino-Telegram-Bot)
- [ArduinoJson](https://arduinojson.org/)
- [Tuya IoT Platform](https://iot.tuya.com/)
